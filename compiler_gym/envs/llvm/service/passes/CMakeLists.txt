################################################################################
# Autogenerated by build_tools/bazel_to_cmake/bazel_to_cmake.py from           #
# ../CompilerGym/compiler_gym/envs/llvm/service/passes/BUILD                   #
#                                                                              #
# Use iree_cmake_extra_content from iree/build_defs.oss.bzl to add arbitrary   #
# CMake-only content.                                                          #
#                                                                              #
# To disable autogeneration for this file entirely, delete this header.        #
################################################################################

cg_add_all_subdirs()

string(CONCAT _CMD
  "\"${Python3_EXECUTABLE}\" "
  "\"$<TARGET_PROPERTY:compiler_gym__envs__llvm__service__passes__extract_passes_from_llvm_source_tree,LOCATION>\""
  " \"${LLVM_SRC_DIR}/llvm\" > $@")
cg_genrule(
  NAME passes_list
  OUTS "passes_list.csv"
  COMMAND ${_CMD}
  DEPENDS
    ::extract_passes_from_llvm_source_tree
)

string(CONCAT _CMD
  "\"${Python3_EXECUTABLE}\" "
  "\"$<TARGET_PROPERTY:compiler_gym__envs__llvm__service__passes__filter_action_space,LOCATION>\" < "
  " \"$<TARGET_PROPERTY:compiler_gym__envs__llvm__service__passes__passes_list,LOCATION>\" > $@")
cg_genrule(
  NAME actions_csv
  OUTS "actions.csv"
  COMMAND ${_CMD}
  DEPENDS
    ::passes_list
    ::filter_action_space
)

cg_py_library(
  NAME
    common
  SRCS
    "common.py"
  PUBLIC
)

cg_py_library(
  NAME
    config
  SRCS
    "config.py"
  DEPS
    ::common
  PUBLIC
)

cg_py_binary(
  NAME
    extract_passes_from_llvm_source_tree
  SRCS
    "extract_passes_from_llvm_source_tree.py"
  DEPS
    ::common
    ::config
)

cg_py_binary(
  NAME
    make_action_space_genfiles
  SRCS
    "make_action_space_genfiles.py"
  DEPS
    ::common
    ::config
)

cg_py_binary(
  NAME
    filter_action_space
  SRCS
    "filter_action_space.py"
  DEPS
    ::common
    ::config
)

string(CONCAT _CMD
  "\"${Python3_EXECUTABLE}\" "
  "\"$<TARGET_PROPERTY:compiler_gym__envs__llvm__service__passes__make_action_space_genfiles,LOCATION>\""
  " $(@D) < \"$<TARGET_PROPERTY:compiler_gym__envs__llvm__service__passes__actions_csv,LOCATION>\""
)
cg_genrule(
  NAME actions_genfiles
  OUTS
    "ActionEnum.h"
    "ActionSwitch.h"
    "ActionHeaders.h"
    "flags.txt"
    "flag_descriptions.txt"
  COMMAND
    ${_CMD}
  DEPENDS
    ::actions_csv
    ::make_action_space_genfiles
)

### BAZEL_TO_CMAKE_PRESERVES_ALL_CONTENT_BELOW_THIS_LINE ###
