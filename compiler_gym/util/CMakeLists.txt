################################################################################
# Autogenerated by build_tools/bazel_to_cmake/bazel_to_cmake.py from           #
# ../CompilerGym/compiler_gym/util/BUILD                                       #
#                                                                              #
# Use iree_cmake_extra_content from iree/build_defs.oss.bzl to add arbitrary   #
# CMake-only content.                                                          #
#                                                                              #
# To disable autogeneration for this file entirely, delete this header.        #
################################################################################

cmake_add_all_subdirs()

cmake_py_library(
  NAME
    util
  SRCS
    "__init__.py"
    "capture_output.py"
    "commands.py"
    "debug_util.py"
    "decorators.py"
    "download.py"
    "executor.py"
    "filesystem.py"
    "gym_type_hints.py"
    "logging.py"
    "logs.py"
    "minimize_trajectory.py"
    "parallelization.py"
    "registration.py"
    "runfiles_path.py"
    "shell_format.py"
    "statistics.py"
    "tabulate.py"
    "temporary_working_directory.py"
    "thread_pool.py"
    "timer.py"
    "truncate.py"
  GENERATED_SRCS
    "$<TARGET_PROPERTY:compiler_gym__util__make_version,LOCATION>"
  DEPS
    make_version
    # TODO(boian): verify if needed
    #unconverted_name:@rules_python//python/runfiles
  PUBLIC
)

cmake_cc_library(
  NAME
    EnumUtil
  SRCS
    "EnumUtil.h"
  ABS_DEPS
    grpc++
    fmt
    magic_enum
  PUBLIC
)

cmake_cc_library(
  NAME
    GrpcStatusMacros
  HDRS
    "GrpcStatusMacros.h"
  ABS_DEPS
    Boost::headers
    grpc++
    fmt
    glog::glog
  PUBLIC
)

cmake_cc_library(
  NAME
    RunfilesPath
  HDRS
    "RunfilesPath.h"
  SRCS
    "RunfilesPath.cc"
  ABS_DEPS
    Boost::filesystem
  PUBLIC
)

cmake_cc_library(
  NAME
    StrLenConstexpr
  HDRS
    "StrLenConstexpr.h"
  PUBLIC
)

cmake_cc_library(
  NAME
    Subprocess
  HDRS
    "Subprocess.h"
  SRCS
    "Subprocess.cc"
  DEPS
    compiler_gym::service::proto::compiler_gym_service_cc
  ABS_DEPS
    Boost::filesystem
    Boost::headers
    grpc++
    fmt
  PUBLIC
)

cmake_cc_library(
  NAME
    Unreachable
  HDRS
    "Unreachable.h"
  ABS_DEPS
    glog::glog
  PUBLIC
)

cmake_genrule(
  NAME make_version
  OUTS "version.py"
  SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../../VERSION"
  COMMAND "echo \"__version__ = \\\"$(cat \"${CMAKE_CURRENT_SOURCE_DIR}/../../VERSION\")\\\"\" > $@"
)

cmake_cc_library(
  NAME
    Version
  HDRS
    "$<TARGET_PROPERTY:compiler_gym__util__make_version_header,BINARY_DIR>/Version.h"
  PUBLIC
)

cmake_genrule(
  NAME make_version_header
  OUTS "Version.h"
  SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../../VERSION"
  COMMAND "echo \"#define COMPILER_GYM_VERSION \\\"$(cat \"${CMAKE_CURRENT_SOURCE_DIR}/../../VERSION\")\\\"\" > $@"
)

### BAZEL_TO_CMAKE_PRESERVES_ALL_CONTENT_BELOW_THIS_LINE ###
